!function(){const e=document.querySelector(".hamburger"),t=document.querySelector("nav"),n=document.querySelector(".nav-links"),o=(document.getElementById("appointmentForm"),document.getElementById("formSuccess"),document.getElementById("year"));if("serviceWorker"in navigator){window.addEventListener("load",(function(){navigator.serviceWorker.register("./sw.js").then((function(e){console.log("Service Worker registered successfully:",e.scope),setInterval((function(){e.update()}),36e5),e.addEventListener("updatefound",(function(){const t=e.installing;t&&t.addEventListener("statechange",(function(){"installed"===t.state&&navigator.serviceWorker.controller&&(console.log("New service worker available. Reloading..."),window.location.reload())}))}))})).catch((function(e){console.error("Service Worker registration failed:",e)}))}));let j=!1;navigator.serviceWorker.addEventListener("controllerchange",(function(){j||(j=!0,window.location.reload())}))}let r;window.addEventListener("beforeinstallprompt",(function(e){e.preventDefault(),r=e}));const i=document.querySelector(".section--hero .hero-media"),c=i?i.querySelector(".hero-media-frame"):null;let s=c?c.querySelector("img"):null;const l=i?i.querySelector(".hero-gallery"):null;function a(e){l&&l.querySelectorAll("img").forEach((function(t){t.classList.toggle("is-active",t===e)}))}function u(e){try{return new URL(e,window.location.href).pathname}catch{return String(e||"")}}function d(e,t){if(!c||!s||!e)return;if(s.getAttribute("src")===e)return void(t&&a(t));const n=new Image;n.decoding="async",n.loading="eager",n.src=e,n.onload=function(){const n=document.createElement("img");n.setAttribute("src",e),n.setAttribute("alt",""),n.setAttribute("decoding","async"),n.setAttribute("loading","eager"),n.classList.add("is-top","is-fade-in"),c.appendChild(n);const o=s;o.classList.add("is-fade-out"),requestAnimationFrame((function(){n.classList.remove("is-fade-in")}));const r=function(){o.removeEventListener("transitionend",r),o.parentNode&&o.parentNode.removeChild(o),n.classList.remove("is-top"),s=n};o.addEventListener("transitionend",r),t&&a(t)},n.onerror=function(){}}if(l&&s){const R=u(s.getAttribute("src")||"");let M=null;l.querySelectorAll("img").forEach((function(e){u(e.getAttribute("src")||"")===R&&(M=e)})),M&&a(M),l.querySelectorAll("img").forEach((function(e){e.setAttribute("role","button"),e.setAttribute("tabindex","0"),e.addEventListener("click",(function(){d(e.getAttribute("src"),e)})),e.addEventListener("keydown",(function(t){if("Enter"===t.key||" "===t.key){t.preventDefault();d(e.getAttribute("src"),e)}}))}));const U=4500;let O=!1,P=null;function f(){return Array.from(l.querySelectorAll("img"))}function m(){if(O||document.hidden)return;const e=f();if(e.length<=1)return;const t=(function(e){const t=u(s&&s.getAttribute("src")||""),n=e.findIndex((function(e){return u(e.getAttribute("src")||"")===t}));return n>=0?n:0}(e)+1)%e.length,n=e[t];d(n.getAttribute("src"),n)}i&&(i.addEventListener("mouseenter",(function(){O=!0})),i.addEventListener("mouseleave",(function(){O=!1})),i.addEventListener("focusin",(function(){O=!0})),i.addEventListener("focusout",(function(){O=!1}))),document.addEventListener("visibilitychange",(function(){document.hidden||(O=!1)})),P||f().length<=1||(P=window.setInterval(m,U))}const v=document.querySelector(".hero-media--compact"),g=v?v.querySelector(".hero-media-frame"):null;let h=g?g.querySelector("img"):null;const y=v?v.querySelector(".hero-gallery"):null;function E(e,t){if(!g||!h||!e)return;if(h.getAttribute("src")===e)return void(t&&(y.querySelectorAll("img").forEach((function(e){e.classList.remove("is-active")})),t.classList.add("is-active")));const n=new Image;n.decoding="async",n.loading="eager",n.src=e,n.onload=function(){const n=document.createElement("img");n.setAttribute("src",e),n.setAttribute("alt",""),n.setAttribute("decoding","async"),n.setAttribute("loading","eager"),n.classList.add("is-top","is-fade-in"),g.appendChild(n);const o=h;o.classList.add("is-fade-out"),requestAnimationFrame((function(){n.classList.remove("is-fade-in")}));const r=function(){o.removeEventListener("transitionend",r),o.parentNode&&o.parentNode.removeChild(o),n.classList.remove("is-top"),h=n};o.addEventListener("transitionend",r),t&&(y.querySelectorAll("img").forEach((function(e){e.classList.remove("is-active")})),t.classList.add("is-active"))},n.onerror=function(){}}if(y&&h){const V=u(h.getAttribute("src")||"");let _=null;y.querySelectorAll("img").forEach((function(e){u(e.getAttribute("src")||"")===V&&(_=e)})),!_&&y.querySelectorAll("img").length>0&&(_=y.querySelectorAll("img")[0],setTimeout((function(){E(_.getAttribute("src"),_)}),500)),_&&(y.querySelectorAll("img").forEach((function(e){e.classList.remove("is-active")})),_.classList.add("is-active")),y.querySelectorAll("img").forEach((function(e){e.setAttribute("role","button"),e.setAttribute("tabindex","0"),e.addEventListener("click",(function(){const t=e.getAttribute("src");b(),E(t,e),setTimeout((function(){p()}),3e3)})),e.addEventListener("keydown",(function(t){if("Enter"===t.key||" "===t.key){t.preventDefault();const n=e.getAttribute("src");b(),E(n,e),setTimeout((function(){p()}),3e3)}}))}));const Y=4500;let G=!1,H=null;function L(){return Array.from(y.querySelectorAll("img"))}function A(){if(G||document.hidden)return;const e=L();if(e.length<=1)return;const t=(function(e){const t=u(h&&h.getAttribute("src")||""),n=e.findIndex((function(e){return u(e.getAttribute("src")||"")===t}));return n>=0?n:0}(e)+1)%e.length,n=e[t];E(n.getAttribute("src"),n)}function p(){H||L().length<=1||(H=window.setInterval(A,Y))}function b(){H&&(window.clearInterval(H),H=null)}v&&(v.addEventListener("mouseenter",(function(){G=!0})),v.addEventListener("mouseleave",(function(){G=!1})),v.addEventListener("focusin",(function(){G=!0})),v.addEventListener("focusout",(function(){G=!1}))),document.addEventListener("visibilitychange",(function(){document.hidden||(G=!1)})),p()}o&&(o.textContent=String((new Date).getFullYear()));const w=document.querySelector(".reviews-stage"),S=Array.from(document.querySelectorAll(".review-card")),q=document.querySelector(".review-dots"),k=document.querySelector("[data-review-prev]"),I=document.querySelector("[data-review-next]");function C(e){if(!S.length)return;const t=S.length,n=(e+t)%t;S.forEach((function(e,t){e.classList.toggle("is-active",t===n)})),q&&q.querySelectorAll(".review-dot").forEach((function(e,t){e.classList.toggle("is-active",t===n)})),x=n}let x=0,N=null,B=!1;function W(n){e&&t&&(t.classList.toggle("nav-open",n),e.setAttribute("aria-expanded",String(n)),document.body.classList.toggle("nav-lock",n))}function D(){return!(!t||!t.classList.contains("nav-open"))}S.length&&(q&&(q.innerHTML="",S.forEach((function(e,t){const n=document.createElement("button");n.type="button",n.className="review-dot"+(0===t?" is-active":""),n.setAttribute("aria-label","Go to review "+(t+1)),n.addEventListener("click",(function(){C(t)})),q.appendChild(n)}))),k&&k.addEventListener("click",(function(){C(x-1)})),I&&I.addEventListener("click",(function(){C(x+1)})),w&&(w.addEventListener("mouseenter",(function(){B=!0})),w.addEventListener("mouseleave",(function(){B=!1})),w.addEventListener("focusin",(function(){B=!0})),w.addEventListener("focusout",(function(){B=!1}))),C(0),N||S.length<=1||(N=window.setInterval((function(){B||C(x+1)}),4500))),e&&t&&e.addEventListener("click",(function(e){e.stopPropagation(),W(!D())})),n&&n.querySelectorAll("a").forEach((function(e){e.addEventListener("click",(function(){W(!1)}))})),document.addEventListener("click",(function(e){if(!D()||!t)return;const n=e.target;n instanceof Node&&t.contains(n)||W(!1)})),document.addEventListener("keydown",(function(e){"Escape"===e.key&&D()&&W(!1)}));const F=document.getElementById("service");function T(){if(!F)return;const e=window.location.hash;if(!e||!e.includes("service="))return;const t=e.split("?");if(!(t.length<2))try{const e=new URLSearchParams(t[1]).get("service");if(e){const t=decodeURIComponent(e.replace(/\+/g," ")),n=F.querySelectorAll("option");for(let e=0;e<n.length;e++){const o=n[e].value,r=n[e].textContent.trim();if(o===t||r===t){F.value=o,setTimeout((function(){const e=document.getElementById("appointment");if(e){const t=100,n=e.getBoundingClientRect().top+window.pageYOffset-t;window.scrollTo({top:n,behavior:"smooth"})}}),150);break}}}}catch(e){console.error("Error parsing service from URL:",e)}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",T):setTimeout(T,100),window.addEventListener("hashchange",(function(){setTimeout(T,100)})),document.querySelectorAll('a[href^="#appointment"][data-service]').forEach((function(e){e.addEventListener("click",(function(e){const t=this.getAttribute("data-service");if(t&&F){const e=F.querySelectorAll("option");for(let n=0;n<e.length;n++)if(e[n].value===t||e[n].textContent.trim()===t){F.value=e[n].value;break}}}))})),document.addEventListener("DOMContentLoaded",(function(){if("undefined"==typeof emailjs)return;emailjs.init("gFI-rk8wvwAWAW_nM");const e=document.getElementById("appointmentForm"),t=document.getElementById("formSuccess");e&&e.addEventListener("submit",(function(n){n.preventDefault();let o=!0;e.querySelectorAll(".field-error").forEach((function(e){e.classList.remove("field-error")})),e.querySelectorAll("input[required]").forEach((function(e){e.value.trim()||(o=!1,e.classList.add("field-error"))}));const r=e.querySelector('input[type="email"]');r&&r.value&&(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r.value)||(o=!1,r.classList.add("field-error")));const i=document.getElementById("service");if(i&&!i.value&&(o=!1,i.classList.add("field-error")),!o){const t=e.querySelector(".field-error");return void(t&&t.scrollIntoView({behavior:"smooth",block:"center"}))}const c=e.querySelector('button[type="submit"]'),s=c.textContent;c.disabled=!0,c.textContent="Sending...";const l=new FormData(e),a={name:l.get("name")||"",email:l.get("email")||"",phone:l.get("phone")||"",service:l.get("service")||"",date:l.get("date")||"N/A",time:l.get("time")||"N/A",message:l.get("message")||"N/A"};emailjs.send("service_uk38hjn","template_hk1l74j",a).then((function(n){t&&(t.hidden=!1,t.textContent="Appointment request sent successfully! We'll contact you shortly.",t.scrollIntoView({behavior:"smooth",block:"center"})),e.reset(),c.disabled=!1,c.textContent=s}),(function(e){console.error("EmailJS error:",e),t&&(t.hidden=!1,t.textContent="Failed to send appointment request. Please try again or contact us directly.",t.scrollIntoView({behavior:"smooth",block:"center"})),c.disabled=!1,c.textContent=s}))}))}))}();